package com.mygdx.game;

import com.badlogic.gdx.ApplicationAdapter;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.audio.Music;
import com.badlogic.gdx.audio.Sound;
import com.badlogic.gdx.graphics.GL20;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.graphics.g2d.TextureRegion;
import com.badlogic.gdx.graphics.glutils.ShapeRenderer;
import com.badlogic.gdx.math.Vector3;

import java.util.HashMap;
import java.util.Map;

public class SpaceWorker extends ApplicationAdapter {

    int CurrentLvlNum = 0;
    char[][] CurrentLvl = new char[21][21];
    ShapeRenderer shape;
    Texture grassImage;
    Texture boxImage;
    Texture wallImage;
    Texture waterImage;
    Texture landingImage;
    Texture emptyImage;

    TextureRegion[][] frames = new TextureRegion[4][5];

    OrthographicCamera camera;
    SpriteBatch batch;
    Texture dropImage;
    Texture workerImage;
    //    Texture btn_left;
    Sound dropSound;
    Music rainMusic;
    //    Rectangle bucket;
    Vector3 touchPos;
    int next_x;
    int next_y;
    int after_x;
    int after_y;
    int lvl_state;
    int worker_state;
    int bx;
    int by;
    final int SIDE = 21;
//    Array<Rectangle> raindrops;
//    long lastDropTime;

    int CAGE = 40;

    String[] lvl = new String[]{"**************************************************************************************************************************************WWW******************WLW******************WVWWWW*************WWWBVBLW*************WLVBHWWW*************WWWWBW******************WLW******************WWW************************************************************************************************************************************************************",
            "************************************************************************************************************************************WWWWW****************WVVVW****************WHBBW*WWW************WVBVW*WLW************WWWVWWWLW*************WWVVVVLW*************WVVVWVVW*************WVVVWWWW*************WWWWW***************************************************************************************************************************************",
            "**********************************************************************************************************************************************************WWWWWWW**************WVVVVVWWW***********WWBWWWVVVW***********WVHVBVVBVW***********WVLLWVBVWW***********WWLLWVVVW*************WWWWWWWW*********************************************************************************************************************************************************",
            "*************************************************************************************************************************************************************WWWWW*************WWWWVVLW*************WVVVBVXW*************WVBBVBLW*************WWHWWLLW**************WWWWWWW******************************************************************************************************************************************************************************",
            "***********************************************************************************************************************************************************WWWW*****************WHVWWW***************WVBVVW**************WWWVWVWW*************WLWVWVVW*************WLBVVWVW*************WLVVVBVW*************WWWWWWWW************************************************************************************************************************************",
            "**************************************************************************************************************************************WWWWWWW*************WWVVWVHW*************WVVVWVVW*************WBVBVBVW*************WVBWWVVW***********WWWVBVWVWW***********WLLLLLVVW************WWWWWWWWW**********************************************************************************************************************************************************",
            "************************************************************************************************************************************************************WWWWWW*************WWWVVVVW************WWLVBWWVWW***********WLLBVBVVHW***********WLLVBVBVWW***********WWWWWWVVW*****************WWWW*********************************************************************************************************************************************************",
            "************************************************************************************************************************************************************WWWWWW***************WVVVVW*************WWWBBBVW*************WHVBLLVW*************WVBLLLWW*************WWWWVVW*****************WWWW**********************************************************************************************************************************************************",
            "***************************************************************************************************************************************WWWW*****************WLLW****************WWVLWW***************WVVBLW**************WWVBVVWW*************WVVWBBVW*************WVVHVVVW*************WWWWWWWW*********************************************************************************************************************************************************",
            "************************************************************************************************************************************************************WWWWW**************WWWVVHW**************WVVBLVWW*************WVVLBLVW*************WWWVXBVW***************WVVVWW***************WWWWW**********************************************************************************************************************************************************",
            "**********************************************************************************************************************************************************WWWWWWWW*************WVVWVVVW*************WVBLLBVW*************WHBLXVWW*************WVBLLBVW*************WVVWVVVW*************WWWWWWWW*********************************************************************************************************************************************************",
            "**************************************************************************************************************************************WWWWWW***************WVVVVWWW*************WVBVVVVW***********WWWVBVWWVW***********WLLLVBVVVW***********WLLLBWBVWW***********WWWWVWVBVW**************WVVHVVW**************WWWWWWW***********************************************************************************************************************************",
            "*********************************************************************************************************************************************************WWWWWW***************WVVVVW***************WVBBBWW**************WVVWLLWWW************WWVVLLBVW*************WVHVVVVW*************WWWWWWWW*********************************************************************************************************************************************************",
            "**************************************************************************************************************************************WWWWWWWW*************WVVVWLVW************WWVVBLLLW************WVVBVWXLW***********WWVWWBWVWW***********WVVVBVVBVW***********WVVVWVVVVW***********WWWWWWWHVW*****************WWWW***********************************************************************************************************************************",
            "*************************************************************************************************************************************WWWWWWW**************WLLLLVW*************WWWLLLBWWW***********WVVBWBVBVW***********WVBBVVWBVW***********WVVVVWVVVW***********WWWWVHVWWW**************WWWWW**********************************************************************************************************************************************************",
            "**********************************************************************************************************************************************************WWWWWWWW*************WLLVVVVW*************WLLBVBHW*************WBWBBBWW*************WLLBVBVW*************WLLVVVVW*************WWWWWWWW*********************************************************************************************************************************************************",
            "************************************************************************************************************************************WWWWWWWW*************WVVVVVVW*************WVWBBVVW*************WVLLLWVW*************WWLLLBVWW*************WVWWVBVW*************WBVVBVVW*************WVVWVVHW*************WWWWWWWW************************************************************************************************************************************",
            "**************************************************************************************************************************************WWWWW**************WWWVVVWWWW***********WVVVBVBVVW***********WVBVVVBVHW***********WWWBBWWWWW*************WVVLLW***************WLLLLW***************WWWWWW**********************************************************************************************************************************************************",
            "*********************************************************************************************************************************************************WWWWWWWWW************WVVVXVVVW************WVBLBLVHW************WVLBLBLVW************WVBLBLBVW************WVVVXVVVW************WWWWWWWWW*********************************************************************************************************************************************************",
            "*******************************************************************************************************************************************************************************WWWWWWWWW***********WWVVVVVVVW***********WVVVWBWBVW***********WVBBVVLBLW***********WVHWWWLLLW***********WWWW*WWWWW********************************************************************************************************************************************************",
            "***********************************************************************************************************************************************************WWWWWW***************WLVLLW***************WLVBLW**************WWWVVBWW*************WVBVVBVW*************WVWBWWVW*************WVVVHVVW*************WWWWWWWW************************************************************************************************************************************",
            "**********************************************************************************************************************************************************WWWWW****************WVVVWWWW************WWVWBVVVW************WVBVVBBVW************WVWBWLXLW************WVVVHLLLW************WWWWWWWWW*********************************************************************************************************************************************************",
            "***************************************************************************************************************************************WWWWW*************WWWWVVVWW************WVBVBVVVW************WHWLXLWVW************WVWLXLWVW************WVVVBVBVW************WWVVVWWWW*************WWWWW************************************************************************************************************************************************************",
            "************************************************************************************************************************************************************WWWWW*************WWWWLVVWW************WVBLBLVVW************WHBWVWBVW************WVBLVLVVW************WWWWBWBVW**************WLVLVVW**************WWWWWWW************************************************************************************************************************************",
            "***********************************************************************************************************************************************************WWWWWWWW**********WWWWVVVVLVW**********WVVBVBVBLVW**********WVVLWWWWLWW**********WVBLBVBVHW***********WVVLVVVVWW***********WWWWWWWWW**********************************************************************************************************************************************************",
            "********************************************************************************************************************************************************WWWWWWW**************WVVVVVWWWWW**********WVBVLXLVBVW**********WHBLXVXLBVW**********WVBVLXLVBVW**********WWWWWWVVVVW***************WWWWWW********************************************************************************************************************************************************",
            "*********************************************************************************************************************************************************WWWWWW***************WVVVVW***************WVBVVWWWW************WVBXLLXVW************WVXLLXBVW************WWWWVVBVW***************WVHVVW***************WWWWWW************************************************************************************************************************************",
            "************************************************************************************************************************************************************WWWWWW************WWWWLVVHW************WVVBBBVVW************WLWWLWWLW************WVVVBVVVW************WVVBLWVWW************WWWWVVVW****************WWWWW*************************************************************************************************************************************",
            "*********************************************************************************************************************************************************WWWWWWWWW************WLVVBLVHW************WVLBLBVVW************WWBLBVBWW************WVLBLBVVW************WLVVBLVVW************WWWWWWWWW*********************************************************************************************************************************************************",
            "**********************************************************************************************************************************************************WWWWWWW**************WVVHVVW**************WWBVBVW**************WVVBBWW**************WLLLLW***************WWWWWW********************************************************************************************************************************************************************************",
            "*************************************************************************************************************************************WWWW*****************WVVWWWWW************WWBVWWVVW************WVVBHBVVW************WVVVWWBVW************WWWLWWVWWW************WLLLBVBVW************WWLLVVVVW*************WWWWWWWW***********************************************************************************************************************************",
            "*********************************************************************************************************************************************************WWWWWWWW*************WVVWLLVWW************WVBLVBXVW************WVVBHBVVW************WVXBVLBVW************WWVLLWVVW*************WWWWWWWW*********************************************************************************************************************************************************",
            "*************************************************************************************************************************************WWWWWWW*************WWVVXVVWW************WVLVLVLVW************WVBVXVVVW************WXBBXBBXW************WVVVXVBVW************WVLVLHLVW************WWVVXVVWW*************WWWWWWW*************************************************************************************************************************************",
            "*********************************************************************************************************************************************************WWWWWWWWW************WVVVLBVHW************WVBVXVBVW************WXLLLXLXW************WVBBXVVVW************WVVVLVBVW************WWWWWWWWW*********************************************************************************************************************************************************",
            "****************************************************************************************************************************************WWWWWW***********WWWWWLVVVW***********WVVWLLWWVW***********WVVBLLVVVW***********WVVWVLWVWW**********WWWVWWBWVVW**********WVBVVVVBBVW**********WVWBWVVWVVW**********WHVVWWWWWWW**********WWWWW********************************************************************************************************************",
            "***********************************************************************************************************************************************************WWWWWW***************WVLLLW************WWWWLLLLW************WVVWWWBVWWW**********WVBVBVVBBVW**********WHVBVBVVVVW**********WVVWWWWVVVW**********WWWW**WWWWW***********************************************************************************************************************************",
            "************************************************************************************************************************************WWWWWWWWW************WVVWWVVVW************WVVVBVVVW************WBVWWWVBW************WVWLLLWVW***********WWVWLLLWVWW**********WVBVVBVVBVW**********WVVVVVWVHVW**********WWWWWWWWWWW***********************************************************************************************************************************",
            "*********************************************************************************************WWWWWWW************WWWVVVVVW***********WWVVVWVWVW***********WVVWLBBBVW***********WVWLXWVWWW***********WVVLLWVW*************WWWLLBVWW**************WLWVBVW*************WWVWVWHW*************WVBVVBVW*************WVVVVWWW*************WWWWWW*****************************************************************************************************************",
            "******************************************************************************************WWWWWWWWWW**********WWVVVVVVVVW**********WHVBBBVBVVW**********WWVBVVBVBVW***********WWVWWWWVWW************WVVVVBVWW**********WWWVWWBVBVW**********WVVVVWVVVVW**********WVVVVWWWWWW**********WVVVVWW**************WLLLLLW**************WLLLLLW**************WWWWWWW*********************************************************************************************",
            "******************************************************************************************WWWWWWWW*************WVVVVVVW*************WVHVBWVW*************WWVWVVVW*************WVBWLWVW*************WVVLXLBW*************WWVWLWVW**************WVWLVVWW************WWVBLWVVW************WVVWVBVVW************WVBVVVWWW************WVVWWWW**************WWWW***********************************************************************************************",
            "************************************************************************************************WWWW*****************WHVW*************WWWWWVVW**********WWWWVVVVVVW**********WVVVLWWWVWW**********WVWVWVVVVWW**********WVWVBVBWLVW**********WVWVVXVVWVW**********WVLWBVBVWVW**********WWVVVVWVWVW***********WVWWWLVVVW***********WVVVVVWWWW***********WWWWWWW********************************************************************************************",
            "*****************************************************************************************************************WWWWW****************WVVVWW***************WVVBVW***************WVBVHW***************WWWLVW*****************WLWW*****************WLVW***************WWWLVW***************WVVBVW***************WVBVVW***************WWVVWW****************WWWW********************************************************************************************",
            "*******************************************************************************************WWWW*****************WVVWWWWW*************WVVWVVVW*************WVLVVWVW*************WWBWVVLW**************WVWBWVW*************WWLVVLVW*************WVVWWVVW*************WVVWVVXW*************WVBVVBVW*************WVBWXVHW*************WVVWLWWW*************WWWWWW********************************************************************************************",
            "********************************************************************************************WWW******************WLWWWWWW***********WWWLBVWVVW***********WLLLVVWBVW***********WLWWVBVVVW**********WWLBVBWWVWW**********WLBVWVWWVW***********WLWBVVVVVW***********WLBVVWBVBW***********WLVBWWVHVW***********WLBVVVVBVW***********WLVWWWWWWW***********WWWW************************************************************************************************",
            "*******************************************************************************************************************WWWW***************WWWVVWW*************WWVVVVVWW************WVVVWVLLW***********WWVBWXWBLW***********WVVBVWVBLW***********WVVBVHVBLW***********WVVBVWVBLW***********WWBBWXWBLW************WLVVWVLLW************WWLVVVVWW*************WWWVVWW****************WWWW**********************************************************************",
            "******************************************************************************************WWWWWWWWW************WVVVVVVVW************WVWVWWWVW************WVBBVVWVW************WHBVVVWVW************WWVWWVWVW************WVVVBVBVW************WVBWWVWVW************WVVVWBWVW************WLLLWVVVW************WLWLWBWWW************WLLLVVW**************WWWWWWW********************************************************************************************",
            "***************************************************************************************************************WWWWWWWW*************WVVVVVLW*************WVWBWLLWW************WVVVBLLLW************WWVWWLBLW*************WVWWVVWW*************WBWWVVW*************WWVVVWBW*************WVVWVVVW*************WVVVBVWWWW***********WVBVBVVVHW***********WVVWWWVVVW***********WWWW*WWWWW********************************************************************",
            "****************************************************************************************************************WWWW*****************WVVWWWW**************WVVBVVW**************WVWLWVW**************WVWVWVW**************WLBLBLW**************WVWVWVW**************WVWLWVW**************WVVBBVW**************WWVHVVW***************WVVWWW***************WWWW*********************************************************************************************",
            "*****************************************************************************************WWWWWW*WWWW**********WVVVVWWWVVW**********WVBBVVWWVVW**********WVVWVBVVVVW**********WWVWWVBWVVW***********WVWLLLVVWW***********WVVLLLWBWW***********WVWLLLWVVW**********WWVWVWWWHVW**********WVVBVBVVBVW**********WVWBWWWWVVW**********WVVVW**WWWW**********WWWWW***********************************************************************************************",
            "***************************************************************************************************************WWWWWWWWWW***********WLLBVBVXLW***********WLXVBVBLLW***********WWLBVBVXWW************WXVBVBLW*************WLBVBVLW*************WLVBVBLW*************WLBHBVXW************WWXVBVBLWW***********WLLBVBVXLW***********WLXVBVBLLW***********WWWWWWWWWW*****************************************************************************************",
            "**************************************************************************************************************WWWWW****************WVVVW****************WBVVW**************WWWVVBWW*************WVVBVBVW***********WWWVWVWWVW***WWWWWW**WVVVWVWWVWWWWWVVLLW**WVBVVBVVVVVVVVVVLLW**WWWWWVWWWVWHWWVVLLW******WVVVVVWWWWWWWWW******WWWWWWW******************************************************************************************************************",
            "**********************************************************************************************************************************WWWWWWWWWWWW*********WLLVVWVVVVVWWW*******WLLVVWVBVVBVVW*******WLLVVWBWWWWVVW*******WLLVVVVHVWWVVW*******WLLVVWVWVVBVWW*******WWWWWWVWWBVBVW*********WVBVVBVBVBVW*********WVVVVWVVVVVW*********WWWWWWWWWWWW************************************************************************************************************",
            "****************************************************************************************************************************************WWWWWWWW*************WVVVVVHW*************WVBWBVWW*************WVBVVBW**************WWBVBVW******WWWWWWWWWVBVWVWWW****WLLLLVVWWVBVVBVVW****WWLLLVVVVBVVBVVVW****WLLLLVVWWWWWWWWWW****WWWWWWWW*******************************************************************************************************************",
            "************************************************************************************************WWWWWWWW*************WVVLLLLW**WWWWWWWWWWWWVVLLLLW**WVVVVWVVBVBVVVLLLLW**WVBBBWBVVBVWVVLLLLW**WVVBVVVVVBVWVVLLLLW**WVBBVWBVBVBWWWWWWWW**WVVBVWVVVVVW*********WWVWWWWWWWWW*********WVVVVWVVVVWW*********WVVVVVBVVVWW*********WVVBBWBBVVHW*********WVVVVWVVVVWW*********WWWWWWWWWWW************************************************************************",
            "**********************************************************************************************WWWWW****************WVVVWWWWW************WVWBWWVVW************WVVVVVBVW****WWWWWWWWWVWWWVVVW****WLLLLVVWWVBVVBWWW****WLLLLVVVVBVBBVWW*****WLLLLVVWWBVVBVHW*****WWWWWWWWWVVBVVWW*************WVBVBVVW*************WWWVWWVW***************WVVVVW***************WWWWWW***************************************************************************************",
            "***********************************************************************************************************************************WWWWWW**WWW**********WLLVVWVWWHWW*********WLLVVWWWVVVW*********WLLVVVVVBBVW*********WLLVVWVWVBVW*********WLLWWWVWVBVW*********WWWWVBVWBVVW************WVVBWVBVW************WVBVVBVVW************WVVWWVVVW************WWWWWWWWW****************************************************************************************",
            "********************************************************************************************************************WWWWW**********WWWWWWWVVVWW********WWVWVHWWVBBVW********WVVVVBVVVVVVW********WVVBVVWWWVVVW********WWWVWWWWWBWWW********WVBVVWWWVLLW*********WVBVBVBVLLLW*********WVVVVWWWLLLW*********WVBBVW*WLLLW*********WVVWWW*WWWWW*********WWWW*************************************************************************************************",
            "********************************************************************WWWW*****************WVVWWWWWWWWWWW*******WVVVVBVVVBVBVW*******WVBWVBVWVVBVVW*******WVVBVBVVWVVVVW*****WWWVBWVWVVWWWWVW*****WHWBVBVBVVWWVVVW*****WVVVVBVWBWVVVWVW*****WVVVBVVVVBVBVBVW*****WWWWWVVWWWWWWWWW*******WVVVVVVW*************WVVVVVVW*************WLLLLLLW*************WLLLLLLW*************WLLLLLLW*************WWWWWWWW**************************************************",
            "************************************************************************************************WWWWWWW**************WVVLLLW**********WWWWWVVLLLW**********WVVVVVVLVLW**********WVVWWVVLLLW**********WWVWWVVLLLW*********WWWVWWWWWWWW*********WVBBBVWW*********WWWWWVVBVBVWWWWW****WWVVVWBVBVVVWVVVW****WHVBVVBVVVVBVVBVW****WWWWWWVBBVBVWWWWW*********WVVVVVVW*************WWWWWWWW*********************************************************************",
            "*****************************************************************WWW**WWWWWWWWWWWWW**WWHWWWWVVVVVVVWVVVW**WVBBVVVBBVVBVBVLLLW**WVVBBBWVVVVBVVWLLLW**WVBVVVWVBBVBBVWLLLW**WWWVVVWVVBVVVVWLLLW**WVVVVVWVBVBVBVWLLLW**WVVVVWWWWWWVWWWLLLW**WWVWVVWVVBVBVVWLLLW**WVVWWVWVBBVBVBWWLLW**WVLLWVWVVBVVVVVVWLW**WVLLWVWVBBBVBBBVWLW**WWWWWVWVVVVVVVWVWLW******WVWWWWWWWWWVWLW******WVVVVVVVVVVVWLW******WWWWWWWWWWWWWWW*******************************************",
            "**************************************************************************WWWW************WWWW*WVVW**********WWWVVWWWBVW*********WWVVVHVVBVVW********WWVVBVBBWWVWW********WVVWBWWVVVVVW********WVWVBVBBVWVWWW*******WVVVBVWVVWVBVWWWWW**WWWWVVVVWVVBBVWVVVW**WWWWVWWVBVVVVVVVVVW**WLVVVVWWWVVWWWWWWWW**WLLVLLW*WWWW*********WLLLWLW**************WLLLLLW**************WWWWWWW****************************************************************************",
            "**************************************************************************************WWWWWWWWWWWWWWWW*****WVVVVVVVVVVVVVVW*****WVWVWWWWWWVVVVVW*****WVWVVBVBVBVBWVVW*****WVWVVVBHBVVVWWVWW****WVWVWBVBVBWWWLLLW****WVWVVVBVBVVWWLLLW****WVWWWBBBVBVWWLLLW****WVVVVVWVWWVWWLLLW****WWWWWVVVWWVWWLLLW********WWWWWVVVVVWWW************WVVVVVW**************WWWWWWW****************************************************************************************",
            "****************************************************************************************WWWWWWWWW***********WWVVVWWVVWWWWWW****WWWVVVVVWVVWVVVVWWW**WVVBVWBVWVVWVVLLLVW**WVWVBWHBWWVWVWLWLVW**WVVWVWBVVWVVVVLVLVW**WVBVVVVBVWVWVWLWLVW**WVVVWWVVWWBVBVLVLVW**WVBVWVVVWVVWBWLWLVW**WWVBVVBVVVBVVBLLLVW***WBVWWWWWWVVVVWWVVW***WVVW****WWWWWWWWWW***WWWW***************************************************************************************************",
            "************************************************************************WWWWWWW********WWWWWWWVVVVVW********WVVVVVWVBHBVW********WBBVWVVVWWWWWWWWW****WVWWWLLLLLLWWVVVW****WVVVBLLLLLLWWVWVW****WVWWWLLLLLLVVVVVW***WWVVVWWWWVWWWVWBWW***WVVWBVVVWVVBVVWVW****WVVBVBBBVVWVBWWVW****WVVVBVBVWWWBBVWVW****WWWWWVVVVVBVVVWVW********WWWVWWWVVVWVW**********WVVVVVWVVVW**********WWWWWWWWVVW*****************WWWW********************************************",
            "********************************************************************WWWWWWWW*************WVVVWVVW*************WVVBVVVW***********WWWVWBVVVWWWW********WVVBVVWWBVVVW********WVVWVHVBVWVBW********WVVWVVVVVVBVWWWW*****WWVWWWWBWWVVVVVW*****WVBWLLLLLWVWVVVW*****WVVBLLXXLVBWVWWW****WWVVWLLLLLWVVVW******WVVVWWWVWWWWWWW******WVBBVVWVVW***********WVVWVVVVVW***********WWWWWWVVVW****************WWWWW***************************************************",
            "*******************************************************************WWWWW****************WVVVWW***************WVVVVW**WWWW*********WVBVVWWWWVVW*********WVVBBVBVVVBW*********WWWHVWBVVVVWW*********WVVWWVVBVBVWW********WVBVVWWVWWVLW********WVVWBWWBVVWLW********WWWVVVBLLWWLW*********WVVVVWLXLLLW*********WVBBVWLLLLLW*********WVVWWWWWWWWW*********WVVW*****************WWWW**************************************************************************",
            "******************************************************************************************WWWWWWWWWW***********WLLVVWVVVW***********WLLVVVVVVW***********WLLVVWVVWWWW********WWWWWWWVVWVVWW*******W            W*******WVVWVVWWVVWVVW*****WWWWVWWVVWWWWVWW*****WVVBVVWWWWWVWVVW*****WVWVBVVBVVWVBVVW*****WVHBVVBVVVWVVVWW*****WWWWVWWVWWWWWWW*********WVVVVW***************WWWWWW************************************************************************",
            "******************************************************************************************WWWWWWWWWWW**********WVVLVVWVVVW**********WVWLVVVVHVW******WWWWWVWWLLWVWWWW****WWVVWVLLWWWVVVVVWWW**WVBVWLLLVVVBVWVVBVW**WVVVVLLVWWVVWWVWWVW**WWWWBWWBWVBVWVVVWVW****WWVWVVVVWBVBBVWVW****WVVBVWVWVVWVBWWVW****W            VVVW****WVVWWWWWWWWWWWVVW****WWWW*********WWWW*************************************************************************************",
            "******************************************************************WWWWWW***************WVVVHWWWW**********WWWWWVBVVVW**********WVVVWWVVVVWWWW*******WVBVWVVWWVVVVW*******WVBVWVVWWWWWVW*******WWVBVVBVVVVWVW*******WWVBVBVWWWVWVW*******WWVWVVBVVWVWVW*******WWVWVWBWVVVWVW*******WWVWWWVVVWVWVWWWWWW**WVVBVVWWWWVWVWLLLLW**WVVVVBVVVVBVVVLLWLW**WWWWBVVBWVBVVVLLLLW**WVVVVVVVWVVWWVLLLLW**WWWWWWWWWWWWWWWWWWW*******************************************",
            "***********************************************WWWWWWWWWW*******WWWWWVVVVVVVVWWWW****WVVVVVWVVVBVVWHVW****WVWWWWWWWBWWWWVVWWW**WVWVVVVWWVWVVWBVLLW**WVWVBVVBVVWVVWVVWLW**WVWVBVVWVVVVVWBVLLW**WVWVVWWWVWWVVVVVWLW**WVWWWVVWVVWVVWBVLLW**WVWVVVVWVBWWWWVVWLW**WVWBVVVBVVBVVWXVLLW**WVVVVBVWVBVBVWVVWLW**WWWWVBWWWVVVVWXVLLW*****WVVVVBBVWWWLLLLW*****WVVVVVVWW*WWWWWW*****WWWWWWWW************************************************************************",
            "******************************************************************WWWWWWWWW************WVVVVVVVW************WVVVVVVVWWWW*********WWVWWWWVWVVW*********WWVWHWWVVVVW*********WVBBBVBVVBBW*********WVVWVWWVBVVW*********WVVWVWWVVBVWWWW******WWWWVVBBBVBWVVW*******WVVVWWVVVLLLLW*******WVWVVVWVWLLVLW*******WVVVWVWVWWLLLW*******WWWWWVBVVWLLLW***********WWVVVWWWWW************WWWWW**********************************************************************",
            "****************************************************************WWWWWW*****WWWW******WVVVVWWWWWWWVVWWWWW**WVVVBWVVWVVBVVWVVVW**WVVBVVBVVBVWVBVBVVW**WWBVBVVVWVHWVBVVVVW**WVVBVWWWWWWWWWWWVWW**WVWVVVWLLLLLLLWVBW***WVWWVVWVLLLLLLWVVW***WVWVVVBLLLLLLLLBVW***WVWVBVWLLLLVLLWVVW***WVVBVBWWWWBWWWWVBW***WVBVVVWWWVBVVVBVVWW**WVBVVVVVBVBVVBVVVVW**WWVWWWWWWVBVWWWWWVW**WVVVVVVVVVWVVVVVVVW**WWWWWWWWWWWWWWWWWWW*******************************************",
            "*****************************************************************************************WWWWWWW**************WVVWVVWWWW*******WWWWWVBWBVWVVWW******WLLVWVVWVVWVVVW******WLLVWVBWBVWVVBWWWW***WLVVWVVVVVWBVVWVVW***WLLVVVBWVVWVBVVVVW***WLLHWVVWBVWBVVWVVW***WLLVWVBWVVVVVBWVVW***WLLVWVVWBBWBVVWVVWW**WLLVWVBWVVWVVBWBVVW**WLLVWVVWVVWVVVWVVVW**WWLVWWWWVVWWWWWVVVW***WWWW**WWWW***WWWWW****************************************************************",
            "****************************************************************WWWWWWWWWWWWWWW******WLLLLLLLLLLVVLWWWW***WLLLLLLLLLLBBLWVVW***WWWWWWWWWWWBVWVVVWW**WVVVVVVBVVBVVVVVBVW**WWVWWWWVVVWVVBVWVVW**WVVVVVVWVVVWWVVWVWW**WVVBWVVWVWWVVWWWVW***WVBVWBWWWVVVVWVWVW***WWWVVBVWVVWVVWWWVW****WWVVVVBVWWVWVVWVWW***WVBVVWVVBVVBVBVVVW***WVVBVVBWBBBVVWVVVW***WVVWVVBVVVVVVWWWWW***WVHWWVVWVVWVVW*******WWWWWWWWWWWWWW***********************************************",
            "****************************************************************WWWW*****************WVVWWWWWWWWWWWWWW****WVVWVVVLLWLLLLLLW****WVVWVWVWWWWWVLLLW****WWBWVVVVLLLLLLLLW****WVVVWWBWWWWWWVVWWWW**WVBVWVVVVVWWWWWWHVW**WWBVWVBVVVWWWWWWVVW**WVVBVWBBBWWVVVVVVVW**WVVVVVVWVVVVWBWBWWW**WVWWWWVWBBBBBVVVVW***WVWVVVVBVVVVVWVVVW***WVWVVVWWVWWVVVVVWWW**WVWWWWWWBWWWWWWVBVW**WVVVVVVVVW****WVVVW**WWWWWWWWWW****WWWWW*******************************************",
            "****************************************************************************************WWWWWWW**************WVVWVVWWWWW*********WWVVWVVWLLLWWW*******WVVBWVVWLLLVVW*******WVBVWBBVLLLVVW*******WVVBWVVWLLLVLW*******WVVVWVBWWWWWWWW******WWBVVVVVVVBVBVW******WWVVWVVBBVWVVVW*******WWWWWWVVWWBBHW************WVVVVVVWW************WWWWWWWW*************************************************************************************************************",
            "**************************************************************************************WWWWWWWWWWWWWWWWW****WLLLVVVWVVVVWVVVWW**WWLLLLLVVBWWVWVWBVW**WLLLLLLWVVBVVWVVVVW**WLLLLLLWVVWVVWVWVVW**WWWWWWWWWVBVVBVBVVW****WVVVVVWBWWBVWWBWW***WWVVVBVVVVWVBVVVVW***WVVWWVWWWVWVVWWBVW***WVBVBBVVVVVBVVBVVW***WVBVVVVBWWBVWWWWWW***WWWWWWWVVHVWW**************WWWWWW*******************************************************************************************",
            "**************************************************************************WWWWW************WWWWWVVVW***********WWVBVVBVVWWWW****WWWWWVBVVBVBVWWLW****WVVVVVVVBBVVWWLLW****WVVWWWWWWVWWWLLVW****WWVWVVWVVVVWLLLVW****WVBVVVWVVVVWLLLVW****WHVWBVWWVWWWWLLLW****WWWWVVBVBBVVWWLLW*******WWVVBVBVVBLLLW********WVBBVVBVWVVLW********WVVVBVBVVWWWW********WWWWWWVVVW****************WWWWW********************************************************************",
            "*************************************************************************************WWWWW****************WVVVWW***************WVBVVWWWWWWWWW*******WWVWVWVVVVVVVWWWWWW**WWVWVVVBWBWHVVWVVVW**WVVWVVVVVVBVWVVVBVW**WVVWWWVWWWWWWWWWVWW**WVVWWVLLXLLLLLVWVWW**WWVWWVXLXLLXLXVWVWW**WVBWWWWWWWWWWVWWBVW**WVVBVVVBVVBVVVVBVVW**WVVWVVVWVVVWVVVWVVW**WWWWWWWWWWWWWWWWWWW*************************************************************************************",
            "********************************************************************************************WWWWWWWWWWW**********WVVVWVVVVVW***WWWWW**WVVVVVBVBVW***WVVVWWWWWVBWWVWVWW***WVBVWWVVVWVWWVBVVW***WVBVVHBBVWVWWBBBVW***WWVWWWVVVWVWWVVVVW***WWVWVVVWWWVWWWWWBW***WWVWVVVVVBVVWLLLLW***WVVWWWVWWVBVWLLLLWW**WVBVVVBVWVVVWLLBLVW**WVVWWVBVWVVWWLLLLVW**WWWWWVVVWWWWWWLLLWW******WWWWW****WWWWW*****************************************************************",
            "*******************************************************************WWWW*****************WVVWWWWWWWWW********WWVVWWVVWVVVW********WVVBWVBHBVVVWWWW*****WBVVBVVWVBVBWVVWW***WWVVBWWVWBVBVVVVVW***WVVWVVWVWVVVBBBVVW***WVBVVVVBVVBWWVWWWW***WVBVBVWBWVVWVVW******WWVVWWWVVWWWBVW*******WVVWLLLLVVVVVW*******WWWWLLLLLLWWWW*********WLLLLWWWW************WLLLWW***************WLLLW****************WWWWW*****************************************************",
            "*************************************************************************WWWW*************WWWWWVVW************WWVVVVVBW***********WWVBVVWWVWWW*********WHBVBVWVBVVW*********WWWWVWWVVVBW**********WLLLLWBVBVW**********WLLLLWVVVBW**********WLLLLVVBBVWW*********WLLLVWVBVVVW*********WWWWWWBVBVVW**************WVVVWWW**************WBVWWW***************WVVW*****************WWWW**********************************************************************",
            "********************************************************************WWWWWWWWWWWW*********WWVVVVVWWVVW*********WWVVVBVVVBVW*********WWWWVWWVBBVW*********WVVVBVWVVVVW*********WVBBBVWVWWWW*********WVVVWVWVBVWW*********WVVWVVWVVBVW*********WVBWVBWVVVVW*********WVVVLLWVWWWW*********WWWWLLVBVWHW*********WLLLLLWVBWVW*********WWLLLLWVVBVW*********WWWLLWWVVVVW*********WWWWWWWWWWWW*******************************************************************",
            "********************************************************************WWWWWWWWW************WLLLLVVVWW***********WLWLWVVBVWW*********WWLLLLWVWVHWW********WVLLLLWVVWVVWW*******WVVVVVWBVWWBVW*******WWVWWWVVBVVVVW********WBVVBVBVBWVVW********WVWVVBVBVWWVW********WVVWWWVVWWVVW********WVVVVWWVWWVWW********WVVBVWVVBVVW*********WWWBVBVVVWWW***********WVVWWWWW*************WWWW*************************************************************************",
            "****************************************************************WWWWWWWWWWWW*WWWWWW**WVVVWVVVVWVWWWLLLLW**WVVVBBWVVVHVVLLLLLW**WVVVWVWWWVVVWVLLLLW**WWVWWVWWWVVWVVLLLLW***WVBVBVVVVVWVWVWWWW***WVVBVBWWVVWVVVVVVW**WWWWVWVVWWWWVWVWWVW**WVVWVWBVVVWWVWVVVVW**WVBVVBVVWVWWVWVVVWW**WVWVBVBVVVVWVWVVVW***WVVBVWWVWWVWVWWWWW***WVBBVVVVVBBVVW*******WWVWWVWWWVBVVW********WVVVVW*WVVVVW********WWWWWW*WWWWWW************************************************",
            "****************************************************************************WWWWW****WWWWW**WWWWWWVVVW****WVVVWWWWVVBVBVBVW****WVBVVVWWVWWVWWVVWW***WVVVBVBVVVVVBVVBVW***WWWVBVVWWVWWVVVVVWW****WVWWWWWVWWWWWBBVW***WWBWWWWWVHWWVVVVVW***WVBVVWWWBWWWVBVVWW***WVBVVWVVVWWWVVWWW****WVBBVBVWVVVBBVW******WVVVVVWVVVWWVVW******WWWWWWWLLVLWWWW*********WLLLLLLLLLW**********WLLLLLLLLLW**********WWWWWWWWWWW***********************************************",
            "****************************************************************WWWWWWWWWWW**********WLLLLLLVVVWWWWWWWWW**WLLLLLLVVVWVVWWVVVW**WLLWWWVBVVVVBVVVVVW**WLLLVBVBVWVVWWWVVVW**WLLLWBWWWWWVVVVWVVW**WWWVVVVWVVVWBVVWBVW****WVVBBVBVBVVBWWVVW****WVVBVVVWBWBVWWBVW****WWWVWWVWVVVVWWVVW*****WVVBVBVWWVWWWWWW*****WVVVVBVVBVVW*********WWVVVWVWVVVW**********WWWWWHWWWWW**************WWW************************************************************************",
            "********************************************************************************************************************WWWW***********WWWWWWWVHW***********WVVVVVBVVW***********WVVVBWWVBW***********WWBWLLLWVW************WVBLLLVVW************WVWLVLWVWW***********WVVVWVWBVW***********WBVVBVVVVW***********WVVWWWWWWW***********WWWW********************************************************************************************************************",
            "*****************************************************************************WWWWWW***WWWWWWWWWWWWWLLLLW**WWVVVWWVVVVVWWLLLLW**WVVBBWWVVBVHWWLLLLW**WVVVVVVBBVBWVVLLLLW**WVVBVWWVBBVWVWVLLLW**WVVBVWWVBVVWVVLLLLW**WWVWWWWWVWWWVWWLWWW**WWVVVBVVBVWWVVVLVVW**WVBWWWVVWVWWWWWVWWW**WVVVBVVVWVVVVVVVW****WVVBVWBVBVBWWWVVW****WVBBBWVBVVVW*WWWW****WVVVVWVVBBVW*********WWWWWWVVVWWW**************WWWWW****************************************************",
            "*********************************************************************WWWWWWWWWWWW*********WVVVVVVVVVVWW********WVVWVWBBVBVVW********WBVWBWVVWWVHW*******WWVWWVWVBVWVWW*******WVVVBVWBVVWVW********WVVVWVBVVVWVW********WWVBVBVVVWWVW********WVVWVVWWVVBVW********WVVVVWWVBBWVW*****WWWWWWBBVVVWVVVW*****WLLLLWVVWWWWWWWW*****WLWLLLVWW************WLLLLVVVW************WLLLLVVVW************WWWWWWWWW****************************************************",
            "***************************************************************************WWWWW***************WWVVVWW*************WWVVVVVW************WWVVBBVVW***********WWVBBVVBVW***********WVBVVVVBVW****WWWW***WVVVBBVWWWWW**WVVWWWWWWWWVWWVVVVW**WL            BBBHW**WLWVWWWWWWWVWWVVVWW**WLWVWWWWWWWLVWBVBWW**WLLLLLLLLLLLVWVVVVW**WWWWWWWWWWWWWWVVBVW***************WWVVWW****************WWWW*****************************************************************",
            "******************************************************************************************WWWWWWWW**********WWWWVVVVVVWWWWWW*****WVVVVWWVBVBVVVHW*****WVWWVWWBWBVBVBWW***WWWVLLLLLLWVVBBVWW***WVVVLLLLLLWVVWVVVW***WVWVLLLLLLWBVVBVVW***WVWVLLLLLLVBBWVBVW***WVBVWWWVWWWBVVBVWW***WWWVVBVVBVVBVVBVW******WVVBVVBVVBVVBVW******WWWWWWVVVWWWWWW***********WWWWW********************************************************************************************",
            "******************************************************************************************************************WWWWWWW**********WWWWWVVWVVWWWW*******WVVVWVVVBVVVVW****WWWWVWBBVWWVWWVVW***WWVVVVVVWVWVVWWVWWW**WVVWWWVBWBVVBVVBVVW**WLLLVVVVWVWWVVWVVVW**WLLLWVVVVHVWVWWWVWW**WLLLWVVWWWVVBVVBVVW**WWWWWWWW*WWVVVWVVVW************WWWWWWWWW**********************************************************************************************************",
            "*****************************************************************WWWWW****************WVVVW****************WVWVWWWWWWW**********WVVVVVVBHWWWWWW******WVBVWWBVWWWVVVW******WVWWWWVBVVVVBVW******WVWWWWWVWVVWBVWWWW**WWVVWWWWVWWBVVVVVVW**WVVBWVVBVVWVWWVWWVW**WVVVVVVVVVWVWLLLWVW**WWWWWWVVWWWVVLLLVVW*******WWWW*WVWLLLWVW************WVWWWVWVW************WVVVVVVVW************WWWWWWWWW****************************************************************",
            "***************************************************************************************WWWWWVWWWW***********WLLLWVWVVWWWW********WLLLWWWVVBVVW********WLLLLWWVBVVBWWW******WWLLLLWWVVVBVVW******WWWLLLVWWVBVBVW******WVWWVVVVWVVBVVW******WVVWWVWVWWWVWWWW*****WVBVWVWBVVBVVVVW*****WVVBVHVBVVVVBVVW*****WVVVWVBVBBVBVWWW*****WVVWWWWWWVVWWW*******WVWW****WWWW*********WWW******************************************************************************",
            "*******************************************************************WWWWWWWWWW***********WVVVVVVVVWWWW********WVWWWWWWVWVVWW*******WVWVBVBVBVVBVW*******WVVVVVVVWBVVVW*******WWWBVVBBWVVWWW*********WVVWWVWVBWW**********WWBWVVVBVHW***********WVVBVBVWWW***********WVWVVVBVVW***********WVWWVVVWVW**********WWVVWWWWWVW**********WVVVVVVVVVW**********WLLLLLLLWWW**********WLLLLLLLW************WWWWWWWWW************************************************",
            "********************************************************************************************************************WWWW*********WWWWWWWWWVVWW*******WWVVBVVVVVVBVWWWWW***WVVVWWVWWVVVWWLLLW***WVWBBVBVBBWBWWLLLW***WVWVVVVHVVWVVVLLLW***WVVBWVWWWBBVVVLLLW***WVBVVBBVVBVWWLLLLW***WWWBVVVVVVVWWWWWWW*****WVVWWWWWWW***********WWWW**********************************************************************************************************************",
            "*********************************************************************WWWWWWWWW************WXLXWXLXW************WLXLXLXLW************WXLXLXLXW************WLXLXLXLW************WXLXLXLXW************WWWVVVWWW**************WVVVW************WWWWWWVWWWWWW********WVVVVVVVVVVVW********WVBVBVBVBVBVW********WWVBVBVBVBVWW*********WBVBVBVBVBW**********WVVVBHBVVVW**********WVVWWWWWVVW**********WWWW***WWWW***********************************************",
            "*************************************************************************WWWW*****************WVVWW****************WVVVWW***************WVBBVWW************WWWBVVBVWW********WWWWVVVVBVVVW******WWWVVWVWWWWWVVW******WVVVVWVWLLLLBVW******WVWVVVBVLLLLWVW******WVVBVWVWLXLLWVW******WWWVVWWWWVWWWVW********WWWWVHBVVWWBWW**********WWWVBVVVVVW************WVVWWVVVW************WWWWWWWWW*****************************************************************",
            "**********************************************************************WWWWWWWWWWWW********WWLLVVVVWVVVW*******WWLLXVBVVVVBVW******WWLLXLWVWVWBVWW******WLLXLWVWVWVBVVW***WWWWLLLWVVWVVVVWVW***WVVWWVWVVVVVVVVVVW***WVHBVBVWWWVVWVWVWW***WVBVVVBVVVWVWVVVW****WWWBBVVVWVWVWVWVW******WVVVBVVVWVWVWWWWW****WVBWVWWWWWVVVVVVW****WBVVVW***WVVVWVVW****WVVWWW***WWVVVVVW****WVVW******WVVVVWW****WWWW******WWWWWW********************************************",
            "****************************************************************WWWWWWWWWWWWWWWWWWW**WVVVVVVWWWVVVVWVVVW**WVWWBVBVVWVBBVWVBVW**WLWVLVLBVWVWLLWVWLW**WLWWWWLWVWVWVWWVWVW**WVVVVWVWVVVWVWVVWVW**WVVBVWVWVWWWVWVWWVW**WVVWVWVWVWLBVWVWVVW**WVBBLWVWVWWVVWVWWVW**WBVWVWVWVVWVWWVVWVW**WVLWVWVWWVWVWVVWWVW**WVVVVWVVWVWVWVWWVVW**WWVVVWWVWVWVWVWVBLW**WWWVWWWVBLWVBLWVBLW**WWWWWWWVVVWVVVWVVHW********WWWWWWWWWWWWW*******************************************"};

//    FileHandle file = Gdx.files.external("sokoban_levels_pack.txt");

    final Map<Integer, char[]> STATES = new HashMap<Integer, char[]>() {
    };
    int curX;
    int curY;

    @Override
    public void create() {
        Gdx.input.setInputProcessor(new SwipeDetector(new SwipeDetector.DirectionListener() {
            @Override
            public void onUp() throws InterruptedException {
                System.out.println("up");
                pre_position();
                next_y -= 1;
                after_y -= 2;
                worker_state = 3;
                position();
                if (STATES.containsKey(lvl_state)) {
                    if (((lvl_state % 100) / 10 == 3) | ((lvl_state % 100) / 10 == 5)) {
                        move(worker_state, true);
                    } else {
                        move(worker_state, false);
                    }
                }
            }

            @Override
            public void onRight() throws InterruptedException {
                System.out.println("right");
                pre_position();
                next_x += 1;
                after_x += 2;
                worker_state = 1;
                position();
                if (STATES.containsKey(lvl_state)) {
                    if (((lvl_state % 100) / 10 == 3) | ((lvl_state % 100) / 10 == 5)) {
                        move(worker_state, true);
                    } else {
                        move(worker_state, false);
                    }
                }
            }

            @Override
            public void onLeft() throws InterruptedException {
                System.out.println("left");
                pre_position();
                next_x -= 1;
                after_x -= 2;
                worker_state = 2;
                position();
                if (STATES.containsKey(lvl_state)) {
                    if (((lvl_state % 100) / 10 == 3) | ((lvl_state % 100) / 10 == 5)) {
                        move(worker_state, true);
                    } else {
                        move(worker_state, false);
                    }
                }
            }


            @Override
            public void onDown() throws InterruptedException {
                System.out.println("down");
                pre_position();
                next_y += 1;
                after_y += 2;
                worker_state = 0;
                position();
                if (STATES.containsKey(lvl_state)) {
                    if (((lvl_state % 100) / 10 == 3) | ((lvl_state % 100) / 10 == 5)) {
                        move(worker_state, true);
                    } else {
                        move(worker_state, false);
                    }
                }
            }
        }));
        STATES.put(121, new char[]{'V', 'H', 'W'});
        STATES.put(122, new char[]{'V', 'H', 'V'});
        STATES.put(123, new char[]{'V', 'H', 'B'});
        STATES.put(124, new char[]{'V', 'H', 'L'});
        STATES.put(125, new char[]{'V', 'H', 'X'});
        STATES.put(132, new char[]{'V', 'H', 'B'});
        STATES.put(134, new char[]{'V', 'H', 'X'});
        STATES.put(141, new char[]{'V', 'P', 'W'});
        STATES.put(142, new char[]{'V', 'P', 'V'});
        STATES.put(143, new char[]{'V', 'P', 'B'});
        STATES.put(144, new char[]{'V', 'P', 'L'});
        STATES.put(145, new char[]{'V', 'P', 'X'});
        STATES.put(152, new char[]{'V', 'P', 'B'});
        STATES.put(154, new char[]{'V', 'P', 'X'});
        STATES.put(221, new char[]{'L', 'H', 'W'});
        STATES.put(222, new char[]{'L', 'H', 'V'});
        STATES.put(223, new char[]{'L', 'H', 'B'});
        STATES.put(224, new char[]{'L', 'H', 'L'});
        STATES.put(225, new char[]{'L', 'H', 'X'});
        STATES.put(232, new char[]{'L', 'H', 'B'});
        STATES.put(234, new char[]{'L', 'H', 'X'});
        STATES.put(241, new char[]{'L', 'P', 'W'});
        STATES.put(242, new char[]{'L', 'P', 'V'});
        STATES.put(243, new char[]{'L', 'P', 'B'});
        STATES.put(244, new char[]{'L', 'P', 'L'});
        STATES.put(245, new char[]{'L', 'P', 'X'});
        STATES.put(252, new char[]{'L', 'P', 'B'});
        STATES.put(254, new char[]{'L', 'P', 'X'});
        camera = new OrthographicCamera();
        camera.setToOrtho(true, 1040, 840);

        batch = new SpriteBatch();
        loadLevel();

        touchPos = new Vector3();
//        btn_left = new Texture("btn_left.png");


        dropImage = new Texture("droplet.png");
        workerImage = new Texture("Worker.png");
        grassImage = new Texture("grass.png");
        boxImage = new Texture("Box.png");
        wallImage = new Texture("Wall.png");
        waterImage = new Texture("Water.png");
        emptyImage = new Texture("empty.png");
        landingImage = new Texture("landing.png");
        TextureRegion[][] tmp = TextureRegion.split(workerImage, CAGE, CAGE);//TextureRegion.split(walkSheet, walkSheet.getWidth()/FRAME_COLS, walkSheet.getHeight()/FRAME_ROWS);
//        TextureRegion[][] frames =
//        frames = new TextureRegion[4 * 5];
        for (int i = 0; i < 5; i++) {
            for (int j = 0; j < 4; j++) {
                tmp[i][j].flip(false, true);
                frames[j][i] = tmp[i][j];
            }
        }
        shape = new ShapeRenderer();
        shape.setAutoShapeType(true);

        dropSound = Gdx.audio.newSound(Gdx.files.internal("waterdrop.wav"));
        rainMusic = Gdx.audio.newMusic(Gdx.files.internal("undertreeinrain.mp3"));

        rainMusic.setLooping(true);
        rainMusic.play();

//        bucket = new Rectangle();
//        bucket.x = 1600 / 2 - 128 / 2;
//        bucket.y = 20;
//        bucket.width = 128;
//        bucket.height = 128;

//        raindrops = new Array<Rectangle>();
//        spawnRaindrop();

    }
//
//    private void spawnRaindrop() {
//        Rectangle raindrop = new Rectangle();
//        raindrop.x = MathUtils.random(0, 1600 - 128);
//        raindrop.y = 960;
//        raindrop.width = 128;
//        raindrop.height = 128;
//        raindrops.add(raindrop);
//        lastDropTime = TimeUtils.nanoTime();
//    }

    public void pre_position() {
        for (int i = 0; i < SIDE * SIDE; i++) {
            int cur_y = i / SIDE;
            int cur_x = i % SIDE;
            if ((CurrentLvl[cur_y][cur_x] == 'H') | (CurrentLvl[cur_y][cur_x] == 'P')) {
                System.out.println("Current worker coords: " + cur_y + " " + cur_x);
                next_y = cur_y;
                next_x = cur_x;
                after_y = cur_y;
                after_x = cur_x;
                if (CurrentLvl[cur_y][cur_x] == 'H') {
                    lvl_state = 100;
                } else {
                    lvl_state = 200;
                    break;
                }
            }
        }
    }

    public void position() {
        if (CurrentLvl[next_y][next_x] == 'W') {
            lvl_state += 10;
        } else if (CurrentLvl[next_y][next_x] == 'V') {
            lvl_state += 20;
        } else if (CurrentLvl[next_y][next_x] == 'B') {
            lvl_state += 30;
        } else if (CurrentLvl[next_y][next_x] == 'L') {
            lvl_state += 40;
        } else if (CurrentLvl[next_y][next_x] == 'X') {
            lvl_state += 50;
        }

        if (CurrentLvl[after_y][after_x] == 'W') {
            lvl_state += 1;
        } else if (CurrentLvl[after_y][after_x] == 'V') {
            lvl_state += 2;
        } else if (CurrentLvl[after_y][after_x] == 'B') {
            lvl_state += 3;
        } else if (CurrentLvl[after_y][after_x] == 'L') {
            lvl_state += 4;
        } else if (CurrentLvl[after_y][after_x] == 'X') {
            lvl_state += 5;
        }
        System.out.println("look forward=" + lvl_state);
        System.out.println();
    }

    public void move(int direction, boolean isBusy) throws InterruptedException {
        int dx = 0;
        int dy = 0;
        if (direction == 0) {
            dy = 4;
            by += 40;
        } else if (direction == 1) {
            dx = 4;
            bx += 40;
        } else if (direction == 2) {
            dx = -4;
            bx -= 40;
        } else if (direction == 3) {
            dy = -4;
            by -= 40;
        }
//        batch.begin();
        if (!isBusy) {
            CurrentLvl[by / 40][bx / 40] = 'V';
            for (int fr = 1; fr < 11; fr++) {
                batch.begin();
                batch.draw(emptyImage, bx, by);
                by += dy;
                bx += dx;
                int dir_num = fr % 5;


                batch.draw(frames[direction][dir_num], bx, by);
                Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);
                batch.end();
                camera.update();
                Thread.sleep(100);
//              batch.setProjectionMatrix(camera.combined);

//            workerImage = frames[direction][dir_num];
//            self.image = self.frames[direction][dir_num];
            }
        } else {
            CurrentLvl[by / 40][bx / 40] = 'V';
            int mbx = bx;
            int mby = by;
            for (int fr = 1; fr < 11; fr++) {
                batch.begin();
                batch.draw(emptyImage, bx, by);
                by += dy;
                bx += dx;
                mby += dy;
                mbx += dx;
                batch.draw(emptyImage, mbx, mby);
                int dir_num = fr % 5;
                batch.draw(frames[direction][dir_num], bx, by);
                batch.draw(boxImage, mbx, mby);
                Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);
                camera.update();
                Thread.sleep(100);
//                batch.setProjectionMatrix(camera.combined);
                batch.end();
                camera.update();
            }
        }
//        batch.end();
        CurrentLvl[by / 40][bx / 40] = STATES.get(lvl_state)[0];
        CurrentLvl[next_y][next_x] = STATES.get(lvl_state)[1];
        CurrentLvl[after_y][after_x] = STATES.get(lvl_state)[2];
//        pos[cur_y][cur_x], pos[next_y][next_x], pos[after_y][after_x] = STATES[level_state]
    }

    public void loadLevel() {
//        String cur = file.readString();
//        return cur;
        String c = lvl[CurrentLvlNum];
        CurrentLvlNum++;
        for (int i = 0; i < 21; i++) {
            for (int j = 0; j < 21; j++) {
                CurrentLvl[j][i] = c.charAt(i * 21 + j);
                if (CurrentLvl[j][i] == 'H') {
                    curX = j * CAGE;
                    curY = i * CAGE;
                }
            }
        }
    }


    public void startPos() {
//        TextureRegion worker = new TextureRegion(workerImage, 0, 0, CAGE, CAGE);
        batch.draw(frames[0][0], curX, curY);
    }

    @Override
    public void render() {
        batch.begin();
        shape.begin();
        int renderX;
        int renderY;
//        Gdx.gl.glClearColor(0, 0, 0, 0);
        for (int j = 0; j < 21; j++) {
            for (int i = 0; i < 21; i++) {
                renderX = i * CAGE;
                renderY = j * CAGE;
                if (CurrentLvl[i][j] == '*') {
                    batch.draw(grassImage, renderX, renderY);
                } else if (CurrentLvl[i][j] == 'W') {
                    batch.draw(wallImage, renderX, renderY);
                } else if (CurrentLvl[i][j] == 'L') {
                    batch.draw(landingImage, renderX, renderY);
                } else if (CurrentLvl[i][j] == 'V') {
                    batch.draw(emptyImage, renderX, renderY);//shape.rect(renderX, renderX, CAGE, CAGE);
                } else if (CurrentLvl[i][j] == 'B') {
                    batch.draw(boxImage, renderX, renderY);
                } else if (CurrentLvl[i][j] == 'X') {
                    batch.draw(landingImage, renderX, renderY);
                    batch.draw(boxImage, renderX, renderY);
//                    shape.rect(renderX, renderX, CAGE, CAGE);
                } else if (CurrentLvl[i][j] == 'P') {//shape.rect(renderX, renderX, CAGE, CAGE);
                    bx = i * CAGE;
                    by = j * CAGE;
                    batch.draw(landingImage, renderX, renderY);
                    batch.draw(frames[0][0], bx, by);
                    bx = i * CAGE;
                    by = j * CAGE;
                } else if (CurrentLvl[i][j] == 'H') {
//                    batch.draw(emptyImage, renderX, renderY);
                    bx = i * CAGE;
                    by = j * CAGE;
                    batch.draw(frames[0][0], bx, by);

//                    startPos();
                }
            }
        }
//        ButtonExample btn = new ButtonExample();
//        btn.render();
//        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

        camera.update();

        batch.setProjectionMatrix(camera.combined);
//        batch.draw(bucketImage, bucket.x, bucket.y, 128, 128, 0, 0, 40, 40, false, false);
//        for (Rectangle raindrop : raindrops) {
//            batch.draw(dropImage, raindrop.x, raindrop.y, 128, 128, 0, 0, 64, 64, false, false);
//        }
        batch.end();
        shape.end();

//        if (Gdx.input.isTouched()) {
//            touchPos.set(Gdx.input.getX(), Gdx.input.getY(), 0);
//            camera.unproject(touchPos);
//            bucket.x = (int) (touchPos.x - 128 / 2);
//        }

//        if (Gdx.input.isKeyPressed(Input.Keys.LEFT)) bucket.x -= 200 * Gdx.graphics.getDeltaTime();
//        if (Gdx.input.isKeyPressed(Input.Keys.RIGHT)) bucket.x += 200 * Gdx.graphics.getDeltaTime();
//
//        if (bucket.x < 0) bucket.x = 0;
//        if (bucket.x > 1600 - 128) bucket.x = 1600 - 128;

//        if (TimeUtils.nanoTime() - lastDropTime > 1000000000) spawnRaindrop();

//        Iterator<Rectangle> iter = raindrops.iterator();
//        while (iter.hasNext()) {
//            Rectangle raindrop = iter.next();
//            raindrop.y -= 200 * Gdx.graphics.getDeltaTime();
//            if (raindrop.y + 128 < 0) iter.remove();
//            if (raindrop.overlaps(bucket)) {
//                dropSound.play();
//                iter.remove();
//            }
//        }
    }

    @Override
    public void dispose() {
        super.dispose();
        dropImage.dispose();
        workerImage.dispose();
        dropSound.dispose();
        rainMusic.dispose();
        batch.dispose();
    }
}